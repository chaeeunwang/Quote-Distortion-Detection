import{r as i,j as e,R as g,a as p}from"./globals.js";const f=({quote:c})=>{const[a,o]=i.useState([]),[n,r]=i.useState(!1);return i.useEffect(()=>{chrome.runtime.onMessage.addListener((t,d,l)=>{t.action==="start_loading"?r(!0):t.action==="display_results"&&(o(t.data||[]),r(!1))}),chrome.runtime.sendMessage({action:"get_latest_results"},t=>{t?.results&&Array.isArray(t.results)&&t.results.length>0?(o(t.results),r(!!t.isLoading)):t?.isLoading&&r(!0)})},[]),e.jsxs("div",{className:"w-full h-full bg-background text-foreground flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary to-accent text-white p-4 shadow-md",children:[e.jsx("h1",{className:"text-lg font-bold",children:"원문 찾기"}),e.jsx("p",{className:"text-xs opacity-90",children:"직접 인용문의 원문을 검색합니다"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[n&&e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-primary"})}),!n&&a.length===0&&e.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"분석할 인용문을 클릭해주세요."}),!n&&a.length>0&&e.jsx("div",{className:"space-y-3",children:a.map((t,d)=>{const l=t.similarity_score??0,u=typeof t.distortion_score=="number"?t.distortion_score:null,s=u!==null?u*100:null,x=l>=70?"bg-green-100 text-green-800":l>=50?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800",m=s===null?"bg-gray-100 text-gray-700":s>=70?"bg-red-100 text-red-800":s>=40?"bg-yellow-100 text-yellow-800":"bg-emerald-100 text-emerald-800";return e.jsxs("div",{className:"p-3 border border-border rounded-lg space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsxs("p",{className:"text-xs font-medium line-clamp-3",children:['"',t.original_span||t.quote||c,'"']}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("span",{className:`text-[10px] font-semibold px-2 py-0.5 rounded ${x}`,children:["유사도 ",l,"%"]}),e.jsxs("span",{className:`text-[10px] font-semibold px-2 py-0.5 rounded ${m}`,children:["왜곡"," ",s!==null?`${s.toFixed(2)}%`:"N/A"]})]})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground truncate",children:t.source_url})]},d)})})]}),e.jsx("div",{className:"border-t border-border p-3 text-xs text-muted-foreground text-center",children:e.jsx("p",{children:"Quote Origin Pipeline © 2024"})})]})},C=g.createRoot(document.getElementById("app"));C.render(e.jsx(p.StrictMode,{children:e.jsx(f,{})}));
